
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Supermercado PRO MAX</title>

<link rel="apple-touch-icon" sizes="1024x1024" href="icon-1024.png">
<link rel="icon" type="image/png" sizes="1024x1024" href="icon-1024.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Supermercado">

<style>
body{font-family:Arial;margin:0;background:#f4f6f8}
header{background:#2e7d32;color:#fff;padding:14px;text-align:center;font-size:20px}
.container{padding:15px}
select,input,button{width:100%;padding:12px;margin:6px 0;font-size:16px}
button{border:none;border-radius:6px}
.green{background:#2e7d32;color:#fff}
.red{background:#c62828;color:#fff}
.orange{background:#ef6c00;color:#fff}
table{width:100%;border-collapse:collapse;margin-top:15px}
th,td{border:1px solid #ccc;padding:8px;text-align:center}
tr.surtido{background:#c8e6c9;text-decoration:line-through}
</style>
</head>
<body>
<header>ðŸ›’ Supermercado PRO MAX</header>
<div class="container">

<select id="categoria"></select>
<select id="producto"></select>
<input type="number" id="cantidad" value="1">
<input type="number" id="precio" placeholder="Precio">

<button class="green" onclick="agregar()">Agregar</button>
<button class="red" onclick="eliminar()">Eliminar seleccionado</button>
<button class="orange" onclick="limpiar()">Limpiar lista</button>

<table>
<thead>
<tr><th>Cat.</th><th>Producto</th><th>Cant.</th><th>Precio</th><th>Subtotal</th><th>âœ”</th></tr>
</thead>
<tbody id="lista"></tbody>
</table>

<h3 id="total">Total: $0</h3>
</div>

<script>
const catalogo={
"Abarrotes":["Arroz","Frijol","Lentejas","Pasta","Harina","AzÃºcar","Sal","Aceite","AtÃºn","Sardina","Cereal","Galletas","Pan","CafÃ©","TÃ©","Mayonesa","Mostaza","Catsup","Miel","Avena"],
"Carnes":["Res","Pollo","Cerdo","Pescado","Chuleta","Milanesa","Costilla","Chorizo","Salchicha","JamÃ³n","Tocino","Bistec","Arrachera","Carne molida","Pechuga","Muslo","Alitas","Longaniza","Hamburguesa","AtÃºn fresco"],
"LÃ¡cteos":["Leche","Queso","Yogurt","Crema","Mantequilla","Huevo","Panela","Oaxaca","Amarillo","Griego","Natilla","Media crema","Leche polvo","Evaporada","RequesÃ³n","Flan","Gelatina","Helado","Nata","Deslactosada"],
"Limpieza":["Cloro","Detergente","Suavizante","JabÃ³n trastes","Limpiador piso","Desinfectante","Esponja","Fibra","Guantes","Bolsas basura","Trapeador","Escoba","Recogedor","Limpiavidrios","Aromatizante","Insecticida","LimpiabaÃ±os","Toallas","JabÃ³n ropa","Quitamanchas"]
};

let compras=[], sel=null;
const cat=document.getElementById("categoria"), prod=document.getElementById("producto");

Object.keys(catalogo).forEach(c=>cat.add(new Option(c,c)));
cat.onchange=()=>{prod.innerHTML="";catalogo[cat.value].forEach(p=>prod.add(new Option(p,p)));};
cat.dispatchEvent(new Event("change"));

function agregar(){
 compras.push({c:cat.value,p:prod.value,ca:+cantidad.value,pr:+precio.value,s:false});
 render();
}
function eliminar(){if(sel!=null){compras.splice(sel,1);sel=null;render();}}
function limpiar(){if(confirm("Â¿Limpiar lista?")){compras=[];render();}}
function toggle(i){compras[i].s=!compras[i].s;render();}

function render(){
 let tb=lista;tb.innerHTML="";let t=0;
 compras.forEach((x,i)=>{
  let tr=document.createElement("tr");
  if(x.s)tr.className="surtido";
  tr.onclick=()=>sel=i;
  tr.innerHTML=`<td>${x.c}</td><td>${x.p}</td><td>${x.ca}</td><td>$${x.pr}</td><td>$${x.ca*x.pr}</td>
  <td><input type="checkbox" ${x.s?"checked":""} onclick="event.stopPropagation();toggle(${i})"></td>`;
  tb.appendChild(tr); t+=x.ca*x.pr;
 });
 total.innerText="Total: $"+t;
}
</script>
</body>
</html>
